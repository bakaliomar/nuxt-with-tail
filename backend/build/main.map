{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/config/index.js","webpack:///./src/core/database/mysql.js","webpack:///./src/index.js","webpack:///./src/middlewares.js","webpack:///./src/middlewares/errorHandler.js","webpack:///./src/middlewares/notFound.js","webpack:///./src/middlewares/okOutput.js","webpack:///./src/modules/public/animes/_routes/index.js","webpack:///./src/modules/public/animes/_routes/show.js","webpack:///./src/modules/public/animes/index.js","webpack:///./src/routes-public.js","webpack:///external \"koa\"","webpack:///external \"koa-bodyparser\"","webpack:///external \"koa-favicon\"","webpack:///external \"koa-router\"","webpack:///external \"koa-static\"","webpack:///external \"mysql\"","webpack:///external \"util\""],"names":["server","port","JWT_SECRET","process","env","pool","mysql","createPool","connectionLimit","host","user","password","database","getConnection","err","connection","code","console","error","release","query","util","promisify","app","Koa","HOST","PORT","config","middlewares","listen","use","serve","favicon","bodyparser","errorHandler","notFound","okOutput","routesPublic","routes","allowedMethods","ctx","next","status","type","body","message","emit","throw","data","router","Router","get","animes","sqlMessage","anime","params","id","prefix","fetchAnimes","fetchAnime","route","modules","module"],"mappings":";;;QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;;AClFA;AAAA;;AAEe;AACbA,QAAM,EAAE;AACNC,QAAI,EAAE;AADA,GADK;AAIb;AACA;AACA;AACA;AACAC,YAAU,EAAEC,OAAO,CAACC,GAAR,CAAYF,UAAZ,IAA0B;AARzB,CAAf,E;;;;;;;;;;;;ACFA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAEA;AACA;AAEA,MAAMG,IAAI,GAAGC,4CAAK,CAACC,UAAN,CAAiB;AAC5BC,iBAAe,EAAE,EADW;AAE5BC,MAAI,EAAE,WAFsB;AAG5BC,MAAI,EAAE,UAHsB;AAI5BC,UAAQ,EAAE,UAJkB;AAK5BC,UAAQ,EAAE;AALkB,CAAjB,CAAb;AAQAP,IAAI,CAACQ,aAAL,CAAmB,CAACC,GAAD,EAAMC,UAAN,KAAqB;AACtC,MAAGD,GAAH,EAAQ;AACN,QAAGA,GAAG,CAACE,IAAJ,KAAa,0BAAhB,EAA4C;AAC1CC,aAAO,CAACC,KAAR,CAAc,gCAAd;AACD;;AACD,QAAGJ,GAAG,CAACE,IAAJ,KAAa,oBAAhB,EAAsC;AACpCC,aAAO,CAACC,KAAR,CAAc,mCAAd;AACD;;AACD,QAAGJ,GAAG,CAACE,IAAJ,KAAa,cAAhB,EAAgC;AAC9BC,aAAO,CAACC,KAAR,CAAc,kCAAd;AACD;AACF,GAXqC,CAYtC;;;AACA,MAAGH,UAAH,EAAe;AACbA,cAAU,CAACI,OAAX;AACD;AACF,CAhBD;AAiBAd,IAAI,CAACe,KAAL,GAAaC,2CAAI,CAACC,SAAL,CAAejB,IAAI,CAACe,KAApB,CAAb;AAEef,mEAAf,E;;;;;;;;;;;;AChCA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAEA;AACA;AACA;AAEA,MAAMkB,GAAG,GAAG,IAAIC,0CAAJ,EAAZ;AACA,MAAMf,IAAI,GAAGN,OAAO,CAACC,GAAR,CAAYqB,IAAZ,IAAoB,WAAjC;AACA,MAAMxB,IAAI,GAAGE,OAAO,CAACC,GAAR,CAAYsB,IAAZ,IAAoBC,+CAAM,CAAC3B,MAAP,CAAcC,IAA/C;AAEA2B,4DAAW,CAACL,GAAD,CAAX;AACAA,GAAG,CAACM,MAAJ,CAAW5B,IAAX,EAAiBQ,IAAjB,E;;;;;;;;;;;;ACXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;AACA;AACA;CAEA;;AACA;AACA;AACA;AAEgBc,kEAAD,IAAS;AACtBA,KAAG,CAACO,GAAJ,CAAQC,iDAAK,CAAC,QAAD,CAAb;AACAR,KAAG,CAACO,GAAJ,CAAQE,kDAAO,CAAC,oBAAD,CAAf;AACAT,KAAG,CAACO,GAAJ,CAAQG,qDAAU,EAAlB;AACAV,KAAG,CAACO,GAAJ,CAAQI,iEAAR;AACAX,KAAG,CAACO,GAAJ,CAAQK,6DAAR;AACAZ,KAAG,CAACO,GAAJ,CAAQM,6DAAR;AACAb,KAAG,CAACO,GAAJ,CAAQO,sDAAY,CAACC,MAAb,EAAR,EAA+BD,sDAAY,CAACE,cAAb,EAA/B,EAPsB,CAQtB;AACD,CATD,E;;;;;;;;;;;;ACVA;AAAA;;AAEe,sEAAOC,GAAP,EAAWC,IAAX,KAAoB;AACnC,MAAI;AACF,UAAMA,IAAI,EAAV;AACD,GAFD,CAEE,OAAO3B,GAAP,EAAY;AACZ0B,OAAG,CAACE,MAAJ,GAAa5B,GAAG,CAAC4B,MAAJ,IAAc,GAA3B;AACAF,OAAG,CAACG,IAAJ,GAAW,MAAX;AACAH,OAAG,CAACI,IAAJ,GAAW;AACTF,YAAM,EAAEF,GAAG,CAACE,MADH;AAETG,aAAO,EAAE/B,GAAG,CAAC+B;AAFJ,KAAX;AAIAL,OAAG,CAACjB,GAAJ,CAAQuB,IAAR,CAAa,OAAb,EAAsBhC,GAAtB,EAA2B0B,GAA3B;AACD;AACA,CAZD,E;;;;;;;;;;;;ACFA;AAAA;;AAEe,sEAAOA,GAAP,EAAYC,IAAZ,KAAqB;AAClC,QAAMA,IAAI,EAAV;;AACA,MAAGD,GAAG,CAACE,MAAJ,KAAe,GAAlB,EAAuB;AACrBF,OAAG,CAACO,KAAJ,CAAU,GAAV,EAAe,WAAf;AACD;AACF,CALD,E;;;;;;;;;;;;ACFA;AAAA;;AACe,sEAAOP,GAAP,EAAYC,IAAZ,KAAqB;AAClC,QAAMA,IAAI,EAAV;;AACA,MAAGD,GAAG,CAACE,MAAJ,KAAe,GAAlB,EAAsB;AACpBF,OAAG,CAACI,IAAJ,GAAW;AACTF,YAAM,EAAE,GADC;AAETM,UAAI,EAAER,GAAG,CAACI;AAFD,KAAX;AAID;AACF,CARD,E;;;;;;;;;;;;ACDA;AAAA;AAAA;AAAA;AAAA;;AAEA;AACA;AAEA,MAAMK,MAAM,GAAG,IAAIC,iDAAJ,EAAf;AAEAD,MAAM,CAACE,GAAP,CAAW,GAAX,EAAgB,OAAOX,GAAP,EAAYC,IAAZ,KAAqB;AACnC,MAAI;AACF,QAAIW,MAAM,GAAG,MAAM/C,2DAAI,CAACe,KAAL,CAAW,4EAAX,CAAnB;AACD,GAFD,CAEE,OAAON,GAAP,EAAY;AACZ0B,OAAG,CAACO,KAAJ,CAAU,GAAV,EAAcjC,GAAG,CAACuC,UAAlB;AACD;;AAEDb,KAAG,CAACG,IAAJ,GAAW,MAAX;AACAH,KAAG,CAACI,IAAJ,GAAWQ,MAAX;AACD,CATD;AAUeH,qEAAf,E;;;;;;;;;;;;ACjBA;AAAA;AAAA;AAAA;AAAA;;AAEA;AACA;AAEA,MAAMA,MAAM,GAAG,IAAIC,iDAAJ,EAAf;AAEAD,MAAM,CAACE,GAAP,CAAW,MAAX,EAAmB,OAAOX,GAAP,EAAYC,IAAZ,KAAqB;AACtC,MAAI;AACF,QAAIa,KAAK,GAAG,MAAMjD,2DAAI,CAACe,KAAL,CAAW,oCAAX,EAAiD,CAACoB,GAAG,CAACe,MAAJ,CAAWC,EAAZ,CAAjD,CAAlB;AACD,GAFD,CAEE,OAAO1C,GAAP,EAAY;AACZ0B,OAAG,CAACO,KAAJ,CAAU,GAAV,EAAejC,GAAG,CAACuC,UAAnB;AACD;;AAED,MAAG,CAACC,KAAJ,EAAW;AACTd,OAAG,CAACE,MAAJ,GAAa,GAAb;AACD;AACF,CAVD;AAYeO,qEAAf,E;;;;;;;;;;;;ACnBA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;AACA;AACA;AAEA,MAAMA,MAAM,GAAG,IAAIC,iDAAJ,CAAW;AAACO,QAAM,EAAE;AAAT,CAAX,CAAf;AAEA,MAAMnB,MAAM,GAAG,CAACoB,+CAAD,EAAcC,uDAAd,CAAf;;AAEA,KAAI,IAAIC,KAAR,IAAiBtB,MAAjB,EAAyB;AACvBW,QAAM,CAACnB,GAAP,CAAW8B,KAAK,CAACtB,MAAN,EAAX,EAA2BsB,KAAK,CAACrB,cAAN,EAA3B;AACD;;AACcU,qEAAf,E;;;;;;;;;;;;ACZA;AAAA;AAAA;AAAA;AAAA;;AACA;AACA;AAEA,MAAMA,MAAM,GAAG,IAAIC,iDAAJ,CAAW;AACxBO,QAAM,EAAE;AADgB,CAAX,CAAf;AAIA,MAAMI,OAAO,GAAG,CAACP,6DAAD,CAAhB;;AAEA,KAAI,IAAIQ,MAAR,IAAkBD,OAAlB,EAA4B;AAC1BZ,QAAM,CAACnB,GAAP,CAAWgC,MAAM,CAACxB,MAAP,EAAX,EAA4BwB,MAAM,CAACvB,cAAP,EAA5B;AACD;;AACcU,qEAAf,E;;;;;;;;;;;;;;;;;;;;;;;ACbA,gC;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,wC;;;;;;;;;;;ACAA,uC;;;;;;;;;;;ACAA,uC;;;;;;;;;;;ACAA,kC;;;;;;;;;;;ACAA,iC","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","'use strict'\n\nexport default {\n  server: {\n    port: 4000\n  },\n  // This secret will be read by JWT library while creating and validating\n  // tokens. In production, we need to store this secret in environment variable\n  // instead of a file.\n  // https://github.com/clintmod/koa-jwt-login-example/blob/master/src/app.js\n  JWT_SECRET: process.env.JWT_SECRET || 'my_jwt_secret'\n}","'use strict'\n\nimport util from 'util'\nimport mysql from 'mysql'\n\nconst pool = mysql.createPool({\n  connectionLimit: 10,\n  host: 'localhost',\n  user: 'nuxtuser',\n  password: 'nuxtpass',\n  database: 'nuxtDB'\n})\n\npool.getConnection((err, connection) => {\n  if(err) {\n    if(err.code === 'PROTOCOL_CONNECTION_LOST') {\n      console.error('Database connection was closed')\n    }\n    if(err.code === 'ER_CON_COUNT_ERROR') {\n      console.error('Database has too many connections')\n    }\n    if(err.code === 'ECONNREFUSED') {\n      console.error('Database connection was refused.')\n    }\n  }\n  // Release the connection to the pool if no error\n  if(connection) {\n    connection.release()\n  }\n})\npool.query = util.promisify(pool.query)\n\nexport default pool","'use strict'\n\nimport Koa from 'koa'\nimport config from './config'\nimport middlewares from './middlewares'\n\nconst app = new Koa()\nconst host = process.env.HOST || '127.0.0.1'\nconst port = process.env.PORT || config.server.port\n\nmiddlewares(app)\napp.listen(port, host)","'use strict'\nimport serve from 'koa-static'\nimport favicon from 'koa-favicon'\nimport bodyparser from 'koa-bodyparser'\nimport routesPublic from './routes-public'\n// import routesPrivate from './routes-private'\nimport errorHandler from './middlewares/errorHandler'\nimport notFound from './middlewares/notFound'\nimport okOutput from './middlewares/okOutput'\n\nexport default (app) => {\n  app.use(serve('assets'))\n  app.use(favicon('static/favicon.ico'))\n  app.use(bodyparser())\n  app.use(errorHandler)\n  app.use(notFound)\n  app.use(okOutput)\n  app.use(routesPublic.routes(), routesPublic.allowedMethods())\n  // app.use(routesPrivate.routes(), routesPrivate.allowedMethods())\n}","'use strict'\n\nexport default async (ctx,next) => {\ntry {\n  await next()\n} catch (err) {\n  ctx.status = err.status || 500\n  ctx.type = 'json'\n  ctx.body = {\n    status: ctx.status,\n    message: err.message\n  }\n  ctx.app.emit('error', err, ctx)\n}\n}","'use strict'\n\nexport default async (ctx, next) => {\n  await next()\n  if(ctx.status === 404) {\n    ctx.throw(404, 'Not found')\n  }\n}","'use strict'\nexport default async (ctx, next) => {\n  await next()\n  if(ctx.status === 200){\n    ctx.body = {\n      status: 200,\n      data: ctx.body\n    }\n  }\n}","'use strict'\n\nimport Router from 'koa-router'\nimport pool from 'core/database/mysql'\n\nconst router = new Router()\n\nrouter.get('/', async (ctx, next) => {\n  try {\n    var animes = await pool.query('SELECT * FROM `episode` inner join `anime` on episode.anime_id = anime.id ')\n  } catch (err) {\n    ctx.throw(500,err.sqlMessage)\n  }\n\n  ctx.type = 'json'\n  ctx.body = animes\n})\nexport default router","'use strict'\n\nimport Router from 'koa-router'\nimport pool from 'core/database/mysql'\n\nconst router = new Router()\n\nrouter.get('/:id', async (ctx, next) => {\n  try {\n    var anime = await pool.query('SELECT * FROM `anime` WHERE id = ?', [ctx.params.id])\n  } catch (err) {\n    ctx.throw(500, err.sqlMessage)\n  }\n\n  if(!anime) {\n    ctx.status = 404\n  }\n})\n\nexport default router","'use strict'\nimport Router from 'koa-router'\nimport fetchAnimes from './_routes'\nimport fetchAnime from './_routes/show.js'\n\nconst router = new Router({prefix: '/anime'})\n\nconst routes = [fetchAnimes, fetchAnime]\n\nfor(let route of routes) {\n  router.use(route.routes(), route.allowedMethods())\n}\nexport default router","'use strict'\nimport Router from 'koa-router'\nimport anime from 'modules/public/animes'\n\nconst router = new Router({\n  prefix: '/public'\n})\n\nconst modules = [anime]\n\nfor(let module of modules ) {\n  router.use(module.routes(), module.allowedMethods())\n}\nexport default router","module.exports = require(\"koa\");","module.exports = require(\"koa-bodyparser\");","module.exports = require(\"koa-favicon\");","module.exports = require(\"koa-router\");","module.exports = require(\"koa-static\");","module.exports = require(\"mysql\");","module.exports = require(\"util\");"],"sourceRoot":""}