{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/config/index.js","webpack:///./src/core/database/mysql.js","webpack:///./src/index.js","webpack:///./src/middlewares.js","webpack:///./src/middlewares/authenticate.js","webpack:///./src/middlewares/errorHandler.js","webpack:///./src/middlewares/notFound.js","webpack:///./src/middlewares/okOutput.js","webpack:///./src/modules/private/animes/_router/index.js","webpack:///./src/modules/private/animes/index.js","webpack:///./src/modules/public/animes/_routes/index.js","webpack:///./src/modules/public/animes/_routes/show.js","webpack:///./src/modules/public/animes/index.js","webpack:///./src/modules/public/login/_routes/local.js","webpack:///./src/modules/public/login/index.js","webpack:///./src/modules/public/user/_routes/fetch-user.js","webpack:///./src/modules/public/user/_routes/index.js","webpack:///./src/modules/public/user/index.js","webpack:///./src/routes-private.js","webpack:///./src/routes-public.js","webpack:///external \"bcryptjs\"","webpack:///external \"jsonwebtoken\"","webpack:///external \"koa\"","webpack:///external \"koa-bodyparser\"","webpack:///external \"koa-router\"","webpack:///external \"koa-static\"","webpack:///external \"mysql\"","webpack:///external \"util\""],"names":["server","port","JWT_SECRET","process","env","pool","mysql","createPool","connectionLimit","host","user","password","database","getConnection","err","connection","code","console","error","release","query","util","promisify","app","Koa","HOST","PORT","config","middlewares","listen","use","serve","bodyparser","errorHandler","notFound","okOutput","routesPublic","routes","allowedMethods","routesPrivate","ctx","next","header","authorization","throw","token","split","state","jwtPayload","jwt","verify","name","message","status","type","body","emit","data","router","Router","get","animes","sqlMessage","prefix","fetchAnimes","route","anime","params","id","fetchAnime","post","request","username","undefined","users","length","match","bcrypt","compareSync","payload","email","sign","expiresIn","local","parseInt","fetchUsers","fetchUser","modules","module","authenticate","login"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","'use strict'\n\nexport default {\n  server: {\n    port: 4000\n  },\n  // This secret will be read by JWT library while creating and validating\n  // tokens. In production, we need to store this secret in environment variable\n  // instead of a file.\n  // https://github.com/clintmod/koa-jwt-login-example/blob/master/src/app.js\n  JWT_SECRET: process.env.JWT_SECRET || 'my_jwt_secret'\n}","'use strict'\n\nimport util from 'util'\nimport mysql from 'mysql'\n\nconst pool = mysql.createPool({\n  connectionLimit: 10,\n  host: 'localhost',\n  user: 'nuxtuser',\n  password: 'nuxtpass',\n  database: 'nuxtDB'\n})\n\npool.getConnection((err, connection) => {\n  if(err) {\n    if(err.code === 'PROTOCOL_CONNECTION_LOST') {\n      console.error('Database connection was closed')\n    }\n    if(err.code === 'ER_CON_COUNT_ERROR') {\n      console.error('Database has too many connections')\n    }\n    if(err.code === 'ECONNREFUSED') {\n      console.error('Database connection was refused.')\n    }\n  }\n  // Release the connection to the pool if no error\n  if(connection) {\n    connection.release()\n  }\n})\npool.query = util.promisify(pool.query)\n\nexport default pool","'use strict'\n\nimport Koa from 'koa'\nimport config from './config'\nimport middlewares from './middlewares'\n\nconst app = new Koa()\nconst host = process.env.HOST || '127.0.0.1'\nconst port = process.env.PORT || config.server.port\n\nmiddlewares(app)\napp.listen(port, host)","'use strict'\nimport serve from 'koa-static'\n// import favicon from 'koa-favicon'\nimport bodyparser from 'koa-bodyparser'\nimport routesPublic from './routes-public'\nimport routesPrivate from './routes-private'\nimport errorHandler from './middlewares/errorHandler'\nimport notFound from './middlewares/notFound'\nimport okOutput from './middlewares/okOutput'\n\nexport default (app) => {\n  app.use(serve('assets'))\n  // app.use(favicon('static/favicon.ico'))\n  app.use(bodyparser())\n  app.use(errorHandler)\n  app.use(notFound)\n  app.use(okOutput)\n  app.use(routesPublic.routes(), routesPublic.allowedMethods())\n  app.use(routesPrivate.routes(), routesPrivate.allowedMethods())\n}","'use strict'\n\nimport jwt from 'jsonwebtoken'\nimport config from 'config'\n\nexport default async (ctx, next) => {\n  if(!ctx.header.authorization) {\n    ctx.throw(401, 'should sign-in or sign-up to access this content')\n  }\n  // get the token\n  const token = ctx.header.authorization.split(' ')[1]\n  try {\n    ctx.state.jwtPayload = jwt.verify(token, config.JWT_SECRET)\n  } catch (err) {\n    if (err.name === 'TokenExpiredError'){\n      ctx.throw(401, err.message)\n    }\n    ctx.throw(403, err.message)\n  }\n  await next()\n}","'use strict'\n\nexport default async (ctx,next) => {\ntry {\n  await next()\n} catch (err) {\n  ctx.status = err.status || 500\n  ctx.type = 'json'\n  ctx.body = {\n    status: ctx.status,\n    message: err.message\n  }\n  ctx.app.emit('error', err, ctx)\n}\n}","'use strict'\n\nexport default async (ctx, next) => {\n  await next()\n  if(ctx.status === 404) {\n    ctx.throw(404, 'Not found')\n  }\n}","'use strict'\nexport default async (ctx, next) => {\n  await next()\n  if(ctx.status === 200){\n    ctx.body = {\n      status: 200,\n      data: ctx.body\n    }\n  }\n}","'use strict'\n\nimport Router from 'koa-router'\nimport pool from 'core/database/mysql'\n\nconst router = new Router()\n\nrouter.get('/', (ctx, next) => {\n  try {\n    var animes = pool.query('SELECT a.* FROM `episode` as e inner join `anime` as a on e.anime_id = a.id')\n  } catch (err) {\n    ctx.throw(500, err.sqlMessage)\n  }\n  ctx.type = 'json'\n  ctx.body = animes\n})\nexport default router\n","'use strict'\n\nimport Router from 'koa-router'\nimport fetchAnimes from './_router'\n\nconst router = new Router({\n  prefix: '/anime'\n})\n\nconst routes = [fetchAnimes]\n\nfor (let route of routes) {\n  router.use(route.routes(), route.allowedMethods())\n}\n\nexport default router\n","'use strict'\n\nimport Router from 'koa-router'\nimport pool from 'core/database/mysql'\n\nconst router = new Router()\n\nrouter.get('/', async (ctx, next) => {\n  try {\n    var animes = await pool.query('SELECT a.*, e.* FROM episode e INNER JOIN anime a ON e.anime_id = a.id ')\n  } catch (err) {\n    ctx.throw(500,err.sqlMessage)\n  }\n\n  ctx.type = 'json'\n  ctx.body = animes\n})\nexport default router","'use strict'\n\nimport Router from 'koa-router'\nimport pool from 'core/database/mysql'\n\nconst router = new Router()\n\nrouter.get('/:id', async (ctx, next) => {\n  try {\n    var anime = await pool.query('SELECT * FROM anime WHERE id = ?', [ctx.params.id])\n  } catch (err) {\n    ctx.throw(500, err.sqlMessage)\n  }\n\n  if(!anime) {\n    ctx.status = 404\n  }\n})\n\nexport default router","'use strict'\nimport Router from 'koa-router'\nimport fetchAnimes from './_routes'\nimport fetchAnime from './_routes/show.js'\n\nconst router = new Router({prefix: '/anime'})\n\nconst routes = [fetchAnimes, fetchAnime]\n\nfor(let route of routes) {\n  router.use(route.routes(), route.allowedMethods())\n}\nexport default router","'use strict'\n\nimport Router from 'koa-router'\nimport jwt from 'jsonwebtoken'\nimport  bcrypt from 'bcryptjs'\nimport pool from 'core/database/mysql'\nimport config from 'config'\n\nconst router = new Router()\n\nrouter.post('/local', async (ctx, next) => {\n  let request = ctx.request.body || {}\n   if(request.username === undefined) {\n     ctx.throw(400, 'username param is required')\n   }\n   if(request.username === '') {\n     ctx.throw(400, 'username is required')\n   }\n   if(request.password === undefined) {\n     ctx.throw(400, 'password param is required')\n   }\n   if(request.password === '') {\n     ctx.throw(400, 'password is required')\n   }\n\n   let username = request.username\n  let password = request.password\n  let users = []\n\n  try {\n    users = await pool.query('SELECT * FROM `users` WHERE username = ?', [username])\n  } catch (err) {\n    ctx.throw(400, err.sqlMessage)\n  }\n   if(users.length === 0) {\n     ctx.throw(404, 'user not found')\n   }\n   let user = users[0]\n  let match = false\n\n  try {\n    match = await bcrypt.compareSync(password, user.password)\n  } catch (err) {\n    ctx.throw(401, err)\n  }\n   if(match === false) {\n     ctx.throw(401, 'invalid password')\n   }\n\n   let payload = { name: user.name, email: user.email }\n   let token = jwt.sign(payload, config.JWT_SECRET, {expiresIn: 1 * 60})\n  ctx.body = {\n     user: payload,\n    message: 'logged in ok',\n    token: token\n  }\n})\nexport default router","'use strict'\n\nimport Router from 'koa-router'\nimport local from './_routes/local'\n\nconst router = new Router({\n  prefix: '/login'\n})\n\nconst routes = [local]\n\nfor (let route of routes) {\n  router.use(route.routes(), route.allowedMethods())\n}\n\nexport default router\n","'use strict'\n\nimport Router from 'koa-router'\nimport pool from 'core/database/mysql'\n\nconst router = new Router()\nrouter.get('/:id', async (ctx, next) => {\n  const id =parseInt(ctx.params.id)\n  try {\n    var user = pool.query('SELECT `id`, `name`, `created_on` FROM `users` WHERE id = ?', [ctx.params.id])\n  } catch (err) {\n    ctx.throw(500, err.sqlMessage)\n  }\n  if(!user){\n    ctx.status = 404\n  }\n  else {\n    ctx.type = 'json'\n    ctx.body = user\n  }\n})\nexport default router","'use strict'\n\nimport Router from 'koa-router'\nimport pool from 'core/database/mysql'\nconst router = new Router()\n\nrouter.get('/', async (ctx, next) => {\n  try {\n    var users = await pool.query('SELECT `id`, `name`, `created_on` FROM `users`')\n  } catch (err) {\n    ctx.throw(500, err.sqlMessage)\n  }\n  ctx.type = 'json'\n  ctx.body = users\n})\nexport default router","'use strict'\n\nimport Router from 'koa-router'\nimport fetchUsers from './_routes'\nimport fetchUser from './_routes/fetch-user'\n\nconst router = new Router({\n  prefix: '/users'\n})\n\nconst routes = [fetchUsers, fetchUser]\nfor (let route of routes) {\n  router.use(route.routes(), route.allowedMethods())\n}\n\nexport default router","'use strict'\n\nimport Router from 'koa-router'\nimport anime from 'private/animes'\nimport authenticate from './middlewares/authenticate'\n\nconst router = new Router({\n  prefix: '/private'\n})\n\nconst modules = [anime]\n\nfor (let module of modules) {\n  router.use(authenticate, module.routes(), module.allowedMethods())\n}\n\nexport default router\n","'use strict'\nimport Router from 'koa-router'\nimport anime from 'modules/public/animes'\nimport login from 'modules/public/login'\nimport users from 'modules/public/user'\n\nconst router = new Router({\n  prefix: '/public'\n})\n\nconst modules = [anime, login, users]\n\nfor(let module of modules ) {\n  router.use(module.routes(), module.allowedMethods())\n}\nexport default router","module.exports = require(\"bcryptjs\");","module.exports = require(\"jsonwebtoken\");","module.exports = require(\"koa\");","module.exports = require(\"koa-bodyparser\");","module.exports = require(\"koa-router\");","module.exports = require(\"koa-static\");","module.exports = require(\"mysql\");","module.exports = require(\"util\");"],"sourceRoot":""}